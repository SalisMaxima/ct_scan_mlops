# Chest CT scan dataset configuration
name: chest_ct_scan

# Data paths (relative to paths.data_dir)
train_dir: train
valid_dir: valid
test_dir: test

# Preprocessed data path (for faster loading)
processed_path: data/processed

# Class mapping
classes:
  - adenocarcinoma
  - large_cell_carcinoma
  - squamous_cell_carcinoma
  - normal

# DataLoader settings
batch_size: 32
num_workers: 0
pin_memory: true
persistent_workers: true

# Image settings
image_size: 224
normalize:
  mean: [0.485, 0.456, 0.406]  # ImageNet defaults
  std: [0.229, 0.224, 0.225]

# Augmentation settings
augmentation:
  # Training augmentations
  train:
    horizontal_flip: true
    vertical_flip: true
    rotation_limit: 30  # Increased for rotation invariance
    brightness_limit: 0.2
    contrast_limit: 0.2
    random_crop: false
    # Enhanced augmentations for shape confusion mitigation
    # Set to true to enable; these help with adenocarcinoma-squamous confusion
    elastic_transform: false
    elastic_alpha: 120
    elastic_sigma: 6
    elastic_p: 0.3
    grid_distortion: false
    grid_steps: 5
    grid_distort_limit: 0.3
    grid_p: 0.3
    coarse_dropout: false
    dropout_max_holes: 8
    dropout_max_height: 32
    dropout_max_width: 32
    dropout_min_holes: 1
    dropout_min_height: 8
    dropout_min_width: 8
    dropout_p: 0.3
    gaussian_noise: false
    noise_var_limit: [10.0, 50.0]
    noise_p: 0.3
    blur: false
    blur_limit: [3, 7]
    blur_p: 0.2
  # Validation/test - only resize and normalize
  eval:
    resize_only: true

# Weighted sampling configuration
# Enable to oversample underrepresented or high-error classes
sampling:
  weighted: false
  # Class weights: [adenocarcinoma, large_cell, squamous_cell, normal]
  # Higher weights = more samples from that class
  # Squamous has highest error rate (14.44%), so can boost its weight
  class_weights: [1.0, 1.0, 1.3, 0.7]
